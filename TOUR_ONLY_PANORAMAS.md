# Панорамы только для тура

## Обзор

Эта функциональность позволяет пользователям загружать панорамы непосредственно в тур, которые не будут отображаться в их общей коллекции панорам. Это полезно для создания уникального контента, предназначенного исключительно для конкретных виртуальных туров.

## Как это работает

1. При загрузке панорамы через новый эндпоинт `/api/tours/{tour_id}/upload-panorama` панорама помечается флагом `tour_only = true`
2. Такие панорамы не отображаются:
   - В общем списке публичных панорам (`/api/panoramas`)
   - В списке панорам пользователя (`/api/users/panoramas`)
3. Панорамы только для тура доступны только в контексте тура, в котором они были загружены

## Техническая реализация

### База данных

Добавлено новое поле в таблицу `panoramas`:
```sql
ALTER TABLE panoramas ADD COLUMN tour_only BOOLEAN DEFAULT FALSE;
```

### API

#### Новый эндпоинт
```
POST /api/tours/{tour_id}/upload-panorama
```

Параметры:
- `file` (multipart) - файл изображения панорамы
- `title` (form) - название панорамы
- `description` (form, опционально) - описание панорамы

Ответ:
```json
{
  "message": "Панорама загружена и добавлена в тур",
  "panorama": { /* данные панорамы */ },
  "tour_panorama": { /* данные связи панорамы с туром */ }
}
```

#### Изменения в существующих эндпоинтах

1. `/api/panoramas` - добавлен фильтр `tour_only = false`
2. `/api/users/panoramas` - добавлен фильтр `tour_only = false`

### Фронтенд

#### Новый компонент
`TourPanoramaUploader` - компонент для загрузки панорам непосредственно в тур

#### Обновленные страницы
- `TourBuilderPage` - добавлена возможность загрузки панорам в тур

## Преимущества

1. **Чистота коллекции** - общая коллекция панорам не засоряется служебными изображениями
2. **Конфиденциальность** - панорамы для частных туров не становятся публичными
3. **Удобство управления** - легче управлять контентом, разделенным по назначению

## Использование

1. Перейдите к созданию или редактированию тура
2. Найдите раздел "Загрузить панораму в тур"
3. Выберите файл изображения
4. Укажите название и описание (опционально)
5. Нажмите "Загрузить в тур"

Панорама будет доступна только в контексте этого тура и не появится в вашей общей коллекции.