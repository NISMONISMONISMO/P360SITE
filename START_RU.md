# Инструкция по запуску проекта PanoramaSite

## Требования

- Python 3.8 или выше
- Node.js 14 или выше
- npm или yarn

## Установка и запуск

### 1. Запуск бэкенда

1. Откройте терминал в корневой папке проекта
2. Перейдите в папку backend:
   ```
   cd backend
   ```
3. Установите зависимости:
   ```
   pip install -r requirements.txt
   ```
4. Инициализируйте базу данных (если нужно):
   ```
   python migrate.py
   ```
5. Запустите сервер:
   ```
   python app.py
   ```
6. Сервер будет доступен по адресу: http://localhost:5000

### 2. Запуск фронтенда

1. Откройте новый терминал в корневой папке проекта
2. Перейдите в папку frontend:
   ```
   cd frontend
   ```
3. Установите зависимости:
   ```
   npm install
   ```
4. Запустите фронтенд:
   ```
   npm run dev
   ```
5. Фронтенд будет доступен по адресу: http://localhost:3000

## Структура проекта

```
PanoramaSite/
├── backend/          # Бэкенд на Flask
│   ├── app.py        # Основной файл приложения
│   ├── models.py     # Модели базы данных
│   ├── config.py     # Конфигурация
│   └── ...           # Другие файлы бэкенда
├── frontend/         # Фронтенд на React
│   ├── src/          # Исходный код
│   │   ├── components/  # Компоненты React
│   │   ├── pages/       # Страницы приложения
│   │   └── ...          # Другие файлы фронтенда
│   └── ...           # Конфигурационные файлы
├── uploads/          # Загруженные файлы (создается автоматически)
└── ...               # Другие файлы
```

## Основные маршруты

### Фронтенд
- `/` - Главная страница
- `/dashboard` - Панель управления
- `/panorama/:id` - Просмотр панорамы
- `/tour/:id` - Просмотр тура
- `/upload` - Загрузка панорамы
- `/admin` - Админ панель
- `/debug/panorama` - Отладочная страница панорамы

### Бэкенд API
- `GET /api/panoramas` - Список панорам
- `GET /api/panoramas/:id` - Информация о панораме
- `GET /api/panoramas/:id/image` - Изображение панорамы
- `POST /api/panoramas/upload` - Загрузка панорамы
- `GET /api/tours` - Список туров
- `GET /api/tours/:id` - Информация о туре

## Устранение неполадок

Если панорама отображается черным экраном:

1. Проверьте, запущены ли оба сервера (бэкенд на 5000, фронтенд на 3000)
2. Проверьте консоль браузера на наличие ошибок
3. Проверьте сетевые запросы во вкладке Network
4. Убедитесь, что файл панорамы существует по указанному пути
5. Проверьте настройки CORS в backend/config.py

## Полезные команды

### Бэкенд
```bash
# Запуск сервера
python app.py

# Тестирование API
python test_api.py

# Проверка WebGL
node check_webgl.js
```

### Фронтенд
```bash
# Запуск в режиме разработки
npm run dev

# Сборка для продакшена
npm run build

# Проверка типов
npm run type-check
```

## Отладка

Для отладки используйте:
1. Страницу `/debug/panorama` - для проверки отображения панорам
2. Файлы `test_webgl_detection.html` и `test_panorama.html` - для проверки WebGL и панорам
3. Консоль браузера - для просмотра ошибок и логов
4. Инструменты разработчика - для анализа сетевых запросов

Если возникают проблемы, обратитесь к файлу `TROUBLESHOOTING_RU.md` для подробной инструкции по устранению неполадок.